{"ast":null,"code":"var _jsxFileName = \"/Users/cenkkaraboa/Desktop/son/web/src/components/common/ZiyaretciKaydet.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport { get, post, postImage } from '../requests/Request';\nimport * as toast from '../utilities/Toast';\nimport * as urlConfig from '../requests/urlconfigs';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ZiyaretciKaydet = () => {\n  _s();\n\n  const useStyles = makeStyles(theme => ({\n    root: {\n      '& > *': {\n        margin: theme.spacing(1)\n      }\n    }\n  }));\n  const classes = useStyles();\n  const [data, setData] = useState({});\n  const [optionData, setOptionData] = useState({\n    isLoading: true,\n    data: []\n  });\n  const [tableData, setTableData] = useState({\n    isLoading: true,\n    data: []\n  });\n  const [img, setImg] = useState(null);\n  const [fileName, setFileName] = useState(null);\n\n  const onChange = event => {\n    let e = event.target;\n    setData({ ...data,\n      [e.name]: e.value\n    });\n  };\n\n  const imgOnChange = e => {\n    setImg(e.target.files[0]);\n    setFileName(e.target.files[0].name);\n  };\n\n  const onSave = () => {\n    console.log(data);\n\n    if (data) {\n      const formData = new FormData();\n      formData.append(\"file\", img);\n      formData.append(\"fileName\", fileName);\n      formData.append(\"name\", data.name);\n      formData.append(\"surname\", data.surname);\n      formData.append(\"phoneNumber\", data.phoneNumber);\n      formData.append(\"employeeId\", data.employeeId);\n      formData.append(\"address\", data.address);\n      const res = postImage(urlConfig.SERVICE_URL + '/api/yonetim/ziyaretciekle', formData);\n      res.then(response => {\n        if (response.data.success) {\n          toast.success(response.data.message);\n          ZiyaretcileriGetir();\n        } else {\n          toast.error(response.data.message);\n        }\n      });\n    }\n  };\n\n  const getOptionData = () => {\n    var serverResult = get(urlConfig.SERVICE_URL + '/api/yonetim/getallemployeeoptions');\n    serverResult.then(data => {\n      if (data.success) {\n        setOptionData({\n          isLoading: false,\n          data: data.data\n        });\n      }\n    });\n  };\n\n  const ZiyaretcileriGetir = () => {\n    var request = get(urlConfig.SERVICE_URL + \"/api/yonetim/ziyaretcileri-getir\");\n    request.then(data => {\n      if (data.success) {\n        const formattedMessages = data.data.map(option => {\n          return {\n            ziyaretciId: option.ziyaretciId,\n            adsoyad: option.adsoyad,\n            telefon: option.telefon,\n            calisanIsmi: option.calisanIsmi,\n            resimUrl: option.resimUrl,\n            kameraId: option.kameraId\n          };\n        });\n        console.log(formattedMessages);\n        setTableData({\n          isLoading: false,\n          data: formattedMessages\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (optionData.isLoading) {\n      getOptionData();\n    }\n  });\n  useEffect(() => {\n    ZiyaretcileriGetir();\n  }, tableData);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mx-auto \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: \"Yeni Ziyaret\\xE7i Kaydet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [optionData.isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Fetching options...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 46\n        }, this), !optionData.isLoading && /*#__PURE__*/_jsxDEV(\"form\", {\n          className: classes.root,\n          noValidate: true,\n          autoComplete: \"off\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            onChange: onChange,\n            name: \"name\",\n            fullWidth: true,\n            helperText: \"Ad girin\",\n            id: \"outlined-basic\",\n            label: \"Ad\",\n            variant: \"outlined\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            onChange: onChange,\n            name: \"surname\",\n            fullWidth: true,\n            helperText: \"Soyad girin\",\n            id: \"outlined-basic\",\n            label: \"Soyad\",\n            variant: \"outlined\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            onChange: onChange,\n            name: \"phoneNumber\",\n            type: \"number\",\n            helperText: \"Telefon numaras\\u0131 girin\",\n            fullWidth: true,\n            id: \"outlined-basic\",\n            label: \"Telefon Numaras\\u0131\",\n            variant: \"outlined\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            variant: \"outlined\",\n            className: classes.formControl,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              id: \"demo-simple-select-outlined-label\",\n              children: \"Gidilecek \\xC7al\\u0131\\u015Fan\\u0131 Se\\xE7in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              labelId: \"demo-simple-select-outlined-label\",\n              id: \"demo-simple-select-outlined\",\n              label: \"Age\",\n              name: \"employeeId\",\n              onChange: onChange,\n              children: optionData.data.map(option => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: option.key,\n                children: option.value\n              }, option.key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Fotograf\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: imgOnChange,\n              name: \"file\",\n              type: \"file\",\n              accept: \"image/*\",\n              className: \"form-control\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-multiline-static\",\n            label: \"Adres\",\n            multiline: true,\n            rows: 4,\n            defaultValue: \"Adres\",\n            variant: \"outlined\",\n            fullWidth: true,\n            name: \"address\",\n            onChange: onChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-footer\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onSave,\n          type: \"button\",\n          className: \"btn btn-primary mx-auto\",\n          children: \"Kaydet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this), tableData.isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Ziyaret\\xE7iler \\xE7ekiliyor...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 37\n    }, this), !tableData.isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          className: classes.table,\n          \"aria-label\": \"simple table\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Ad Soyad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Telefon Numaras\\u0131\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Gidece\\u011Fi \\xC7al\\u0131\\u015Fan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: tableData.data.map(data => /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"fluid\",\n                  width: \"60px\",\n                  height: \"60px\",\n                  src: urlConfig.SERVICE_URL + data.resimUrl\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"th\",\n                scope: \"row\",\n                children: data.ziyaretciId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: data.adsoyad\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: data.telefon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: data.calisanIsmi\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 41\n              }, this)]\n            }, data.ziyaretciId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ZiyaretciKaydet, \"/ANFsp2XSVQlpBcACkudpr0PgTM=\", true);\n\n_c = ZiyaretciKaydet;\nexport default ZiyaretciKaydet;\n\nvar _c;\n\n$RefreshReg$(_c, \"ZiyaretciKaydet\");","map":{"version":3,"sources":["/Users/cenkkaraboa/Desktop/son/web/src/components/common/ZiyaretciKaydet.js"],"names":["React","Component","useEffect","useState","makeStyles","TextField","FormHelperText","FormControl","Select","MenuItem","InputLabel","get","post","postImage","toast","urlConfig","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","ZiyaretciKaydet","useStyles","theme","root","margin","spacing","classes","data","setData","optionData","setOptionData","isLoading","tableData","setTableData","img","setImg","fileName","setFileName","onChange","event","e","target","name","value","imgOnChange","files","onSave","console","log","formData","FormData","append","surname","phoneNumber","employeeId","address","res","SERVICE_URL","then","response","success","message","ZiyaretcileriGetir","error","getOptionData","serverResult","request","formattedMessages","map","option","ziyaretciId","adsoyad","telefon","calisanIsmi","resimUrl","kameraId","formControl","key","table"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport { get, post, postImage } from '../requests/Request';\r\nimport * as toast from '../utilities/Toast';\r\nimport * as urlConfig from '../requests/urlconfigs';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nconst ZiyaretciKaydet = () => {\r\n    const useStyles = makeStyles((theme) => ({\r\n        root: {\r\n            '& > *': {\r\n                margin: theme.spacing(1),\r\n\r\n            },\r\n        },\r\n    }));\r\n    const classes = useStyles();\r\n    const [data, setData] = useState({});\r\n    const [optionData, setOptionData] = useState({\r\n        isLoading: true,\r\n        data: []\r\n    });\r\n    const [tableData, setTableData] = useState({\r\n        isLoading: true,\r\n        data: []\r\n    });\r\n    const [img, setImg] = useState(null);\r\n    const [fileName, setFileName] = useState(null);\r\n    const onChange = (event) => {\r\n        let e = event.target;\r\n        setData({ ...data, [e.name]: e.value });\r\n    }\r\n\r\n    const imgOnChange = (e) => {\r\n        setImg(e.target.files[0]);\r\n        setFileName(e.target.files[0].name);\r\n    }\r\n\r\n    const onSave = () => {\r\n        console.log(data);\r\n        if (data) {\r\n            const formData = new FormData();\r\n            formData.append(\"file\", img);\r\n            formData.append(\"fileName\", fileName);\r\n            formData.append(\"name\", data.name);\r\n            formData.append(\"surname\", data.surname);\r\n            formData.append(\"phoneNumber\", data.phoneNumber);\r\n            formData.append(\"employeeId\", data.employeeId);\r\n            formData.append(\"address\", data.address);\r\n            const res = postImage(urlConfig.SERVICE_URL + '/api/yonetim/ziyaretciekle', formData);\r\n            res.then((response) => {\r\n                if (response.data.success) {\r\n                    toast.success(response.data.message)\r\n                    ZiyaretcileriGetir();\r\n                }\r\n                else {\r\n                    toast.error(response.data.message);\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    const getOptionData = () => {\r\n        var serverResult = get(urlConfig.SERVICE_URL + '/api/yonetim/getallemployeeoptions');\r\n        serverResult.then(data => {\r\n\r\n            if (data.success) {\r\n                setOptionData({\r\n                    isLoading: false,\r\n                    data: data.data\r\n                });\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    const ZiyaretcileriGetir=()=>{\r\n        var request = get(urlConfig.SERVICE_URL + \"/api/yonetim/ziyaretcileri-getir\");\r\n        request.then(data => {\r\n            if (data.success) {\r\n                const formattedMessages = data.data.map((option) => {\r\n                    return {\r\n                        ziyaretciId: option.ziyaretciId,\r\n                        adsoyad: option.adsoyad,\r\n                        telefon: option.telefon,\r\n                        calisanIsmi: option.calisanIsmi,\r\n                        resimUrl: option.resimUrl,\r\n                        kameraId:option.kameraId\r\n                    };\r\n                });\r\n                console.log(formattedMessages);\r\n                setTableData({\r\n                    isLoading: false,\r\n                    data: formattedMessages\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (optionData.isLoading) {\r\n            getOptionData();\r\n        }\r\n    })\r\n\r\n    useEffect(()=>{\r\n        ZiyaretcileriGetir();\r\n    },tableData)\r\n\r\n\r\n    return (\r\n        <div className=\"container content\">\r\n            <div className=\"card mx-auto \">\r\n                <div className=\"card-header text-center\">\r\n                    <h5 className=\"card-title\">\r\n                        Yeni Ziyaretçi Kaydet\r\n                            </h5>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    {optionData.isLoading && <p>Fetching options...</p>}\r\n                    {!optionData.isLoading && (\r\n                        <form className={classes.root} noValidate autoComplete=\"off\">\r\n                            <TextField onChange={onChange} name=\"name\" fullWidth helperText=\"Ad girin\" id=\"outlined-basic\" label=\"Ad\" variant=\"outlined\" />\r\n                            <TextField onChange={onChange} name=\"surname\" fullWidth helperText=\"Soyad girin\" id=\"outlined-basic\" label=\"Soyad\" variant=\"outlined\" />\r\n                            <TextField onChange={onChange} name=\"phoneNumber\" type=\"number\" helperText=\"Telefon numarası girin\" fullWidth id=\"outlined-basic\" label=\"Telefon Numarası\" variant=\"outlined\" />\r\n                            <FormControl fullWidth variant=\"outlined\" className={classes.formControl}>\r\n                                <InputLabel id=\"demo-simple-select-outlined-label\">Gidilecek Çalışanı Seçin</InputLabel>\r\n                                <Select\r\n                                    labelId=\"demo-simple-select-outlined-label\"\r\n                                    id=\"demo-simple-select-outlined\"\r\n                                    label=\"Age\"\r\n                                    name=\"employeeId\"\r\n                                    onChange={onChange}\r\n                                >\r\n                                    {optionData.data.map((option) => (\r\n                                        <MenuItem key={option.key} value={option.key}>{option.value}</MenuItem>\r\n                                    ))}\r\n\r\n                                </Select>\r\n                            </FormControl>\r\n                            <FormControl fullWidth>\r\n                                <label>Fotograf</label>\r\n                                <input onChange={imgOnChange} name=\"file\" type=\"file\" accept=\"image/*\" className=\"form-control\"></input>\r\n                            </FormControl>\r\n                            <TextField\r\n                                id=\"outlined-multiline-static\"\r\n                                label=\"Adres\"\r\n                                multiline\r\n                                rows={4}\r\n                                defaultValue=\"Adres\"\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                name=\"address\"\r\n                                onChange={onChange}\r\n                            />\r\n\r\n                        </form>\r\n                    )}\r\n\r\n                </div>\r\n                <div className=\"card-footer\">\r\n                    <button onClick={onSave} type=\"button\" className=\"btn btn-primary mx-auto\">Kaydet</button>\r\n                </div>\r\n            </div>\r\n            {tableData.isLoading && <p>Ziyaretçiler çekiliyor...</p>}\r\n            {!tableData.isLoading && (\r\n                <div className=\"mt-4\">\r\n                    <TableContainer component={Paper}>\r\n                        <Table className={classes.table} aria-label=\"simple table\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell></TableCell>\r\n                                    <TableCell>#</TableCell>\r\n                                    <TableCell align=\"right\">Ad Soyad</TableCell>\r\n                                    <TableCell align=\"right\">Telefon Numarası</TableCell>\r\n                                    <TableCell align=\"right\">Gideceği Çalışan</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {tableData.data.map((data) => (\r\n                                    <TableRow key={data.ziyaretciId}>\r\n                                        <TableCell>\r\n                                            <img className=\"fluid\" width=\"60px\" height=\"60px\" src={urlConfig.SERVICE_URL+data.resimUrl}></img>\r\n                                        </TableCell>\r\n                                        <TableCell component=\"th\" scope=\"row\">\r\n                                            {data.ziyaretciId}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"right\">{data.adsoyad}</TableCell>\r\n                                        <TableCell align=\"right\">{data.telefon}</TableCell>\r\n                                        <TableCell align=\"right\">{data.calisanIsmi}</TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ZiyaretciKaydet;"]},"metadata":{},"sourceType":"module"}